# UnloadingRelease1C

Скрипт написан как результат знакомства с языком OneScript.
Основная задача это выгрузка cf-файла из хранилища.
Настройки выгрузки лежат в файле в формате json.
По умоланию имя файла настройки config.json.

### Формат файла настроек

```
{
    "Глобальные": {
        "ПапкаВыгрузкиCF": "ИмяКаталогаВыгрузки"
    },
    "Базы": [
        {
            "Имя": "UPP",
            "ВерсияПлатформы": "НомерРелизаВыгрузки",
            "Хранилище_Адрес": "АдресВыгрузкиХранилища",
            "Хранилище_Логин": "ЛогинХранилища",
            "Хранилище_Пароль": "ПарольХранилища"
    ]
}
```

Пример файла

```
{
    "Глобальные": {
        "ПапкаВыгрузкиCF": "Релизы"
    },
    "Базы": [
        {
            "Имя": "UPP",
            "ВерсияПлатформы": "8.3.14.1565",
            "Хранилище_Адрес": "tcp://storage1c/UPP",
            "Хранилище_Логин": "ReadStorage",
            "Хранилище_Пароль": "123"
        },
        {
            "Имя": "WMS",
            "ВерсияПлатформы": "8.3.14.1565",
            "Хранилище_Адрес": "tcp://storage1c/WMS",
            "Хранилище_Логин": "ReadStorage",
            "Хранилище_Пароль": "123"
        }
    ]
}
```

### Варианты запуска через командную строку

Выгрузка всех конфигураций по файлу настройки по умолчанию

```
oscript unloadrelease.os
```

Выгрузка отдельной конфигурации по произвольному файлу настроек

```
oscript unloadrelease.os -base ИмяКонфигурации -setting файлнастроек.json
```

Пример выгрузки через командную строку

```
oscript unloadrelease.os -base WMS -setting config_workbuild.json
```

По итогу формируются файлы

* КаталогGit
  * ИмяКаталогаВыгрузкиКонфигурация
    * ИмяКаталогаКонфигурации
      * Год_Месяц_День.cf

Для работы скрипта требуется скачать OneScript

* <https://oscript.io/downloads>

А также установить следующие библиотеки

* opm i fs
* opm i tempfiles
* opm i ReadParams
* opm i v8runner
* opm i v8storage
* opm i cmdline
